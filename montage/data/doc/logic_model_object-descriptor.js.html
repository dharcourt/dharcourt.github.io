<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: logic/model/object-descriptor.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: logic/model/object-descriptor.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var Montage = require("montage").Montage,
    PropertyDescriptor = require("logic/model/property-descriptor").PropertyDescriptor,
    RelationshipDescriptor = require("logic/model/relationship-descriptor").RelationshipDescriptor;

/**
 * Describes a type of object.
 *
 * Because of
 * [an issue with JSDoc]{@linkplain https://github.com/jsdoc3/jsdoc/issues/1049}
 * the `prototype` property of this class may not appear in the JSDoc generated
 * documentation for this class. This property does exist, however. It is of
 * type `Object` and is a reference to the prototype to use for objects
 * described by instances of this class.
 *
 * @class
 * @extends external:Montage
 */
var ObjectDescriptor = exports.ObjectDescriptor = Montage.specialize(/** @lends ObjectDescriptor# */{

    /***************************************************************************
     * Public prototype properties (instance variables).
     *
     * Private properties are defined and/or documented where they are used.
     */

    /**
     * The name of the type of object described by this descriptor.
     *
     * @type {string}
     */
    name: {
        value: undefined
    },

    /**
     * The prototype to use for objects of this type.
     *
     * @type {Object}
     */
    prototype: {
        value: new Montage()
    },

    /**
     * Descriptors of the properties of objects of this type, by property name.
     *
     * The returned object should not be modified and
     * [addProperty]{@link ObjectDescriptor#addProperty} or
     * [removeProperty]{@link ObjectDescriptor#removeProperty} should be used
     * instead to modify the properties.
     *
     * @type {Object.&lt;string, PropertyDescriptor>}
     */
    properties: {
        get: function () {
            if (!this._properties) {
                this._properties = {};
            }
            return this._properties;
        }
    },

    /***************************************************************************
     * Property management methods.
     */

    /**
     * Add or replace a property descriptor of this object descriptor.
     *
     * @method
     */
    addProperty: {
        value: function (name, descriptor) {
            this.properties[name] = descriptor;
        }
    },

    /**
     * Remove a property descriptor of this object descriptor.
     *
     * @method
     */
    removeProperty: {
        value: function (name) {
            delete this.properties[name];
        }
    },

    /**
     * Convenience method to define multiple relationships without having to
     * manually create [RelationshipDescriptors]{@link RelationshipDescriptor}
     * for them.
     *
     * @private
     * @method
     * @argument {Object} definitions - An object whose property names are the
     *                                  names of the relationships to add and
     *                                  whose property values are objects with
     *                                  values for the
     *                                  [destinationType]{@link RelationshipDescriptor#destinationType},
     *                                  [targetProperties]{@link RelationshipDescriptor#targetProperties},
     *                                  and
     *                                  [criteriaExpressions]{@link RelationshipDescriptor#criteriaExpressions}
     *                                  properties of the
     *                                  [RelationshipDescriptors]{@link RelationshipDescriptor}
     *                                  to create for each relationship.
     *                                  If any destinationType is null the
     *                                  corresponding relationship will be
     *                                  created from this type to itself.
     */
    _addRelationships: {
        value: function (definitions) {
            var name;
            for (name in (definitions || {})) {
                this._addRelationship(name, definitions[name]);
            }
        }
    },

    /**
     * Convenience method to define a single relationship without having to
     * manually create a {@link RelationshipDescriptor} for it.
     *
     * @private
     * @method
     * @argument {string} name       - The name of the relationship
     * @argument {Object} definition - An object with values for the
     *                                 [destinationType]{@link RelationshipDescriptor#destinationType},
     *                                 [targetProperties]{@link RelationshipDescriptor#targetProperties},
     *                                 and
     *                                 [criteriaExpressions]{@link RelationshipDescriptor#criteriaExpressions}
     *                                 properties of the
     *                                 {@link RelationshipDescriptor} to create.
     *                                 If destinationType is null a relationship
     *                                 will be created from this type to itself.
     */
    _addRelationship: {
        value: function (name, definition) {
            var relationship = new RelationshipDescriptor();
            relationship.destinationType = definition.destinationType || this;
            relationship.targetProperties = definition.targetProperties || [];
            relationship.criteriaExpressions = definition.criteriaExpressions || {};
            this.addProperty(name, relationship);
        }
    },

    /**
     * Convenience method to define non-relationship properties without having
     * to manually create [PropertyDescriptors]{@link PropertyDescriptor} for
     * each of them.
     *
     * @private
     * @method
     */
    _addNonRelationshipProperties: {
        value: function (names) {
            var i, n;
            for (i = 0, n = names ? names.length : 0; i &lt; n; ++i) {
                this.addProperty(names, new PropertyDescriptor());
            }
        }
    }

}, {

    /***************************************************************************
     * Constructor methods (class methods).
     */

    /**
     * Convenience method to generate a getter function that will create and
     * then cache the object descriptor corresponding to a constructor. The
     * object descriptors will be created with non-relationship properties taken
     * from the properties of the constructor's prototype and with the
     * relationships specified.
     *
     * @memberof ObjectDescriptor
     * @method
     * @argument {Object} exports       - A Montage Require exports object
     *                                    defining the constructor.
     * @argument {string} name          - The name with which the constructor is
     *                                    defined in the exports, which will be
     *                                    used as the name of the type.
     * @argument {Object} relationships - An object whose property names are the
     *                                    names of the relationships to add and
     *                                    whose property values are objects with
     *                                    values for the
     *                                    [destinationType]{@link RelationshipDescriptor#destinationType},
     *                                    [targetProperties]{@link RelationshipDescriptor#targetProperties},
     *                                    and
     *                                    [criteriaExpressions]{@link RelationshipDescriptor#criteriaExpressions}
     *                                    properties of the
     *                                    [RelationshipDescriptors]{@link RelationshipDescriptor}
     *                                    to create for each relationship.
     *                                    If any destinationType is null the
     *                                    corresponding relationship will be
     *                                    created from this type to itself.
     */
    getterFor: {
        value: function (exports, name, relationships) {
            return function () {
                if (!this._type) {
                    this._type = new ObjectDescriptor();
                    this._type.name = name;
                    this._type.prototype = exports[name].prototype;
                    this._type._addNonRelationshipProperties(Object.keys(exports[name]));
                    this._type._addRelationships(relationships);
                }
                return this._type;
            }
        }
    }

});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Externals</h3><ul><li><a href="external-FrbExpression.html">FrbExpression</a></li><li><a href="external-Montage.html">Montage</a></li><li><a href="external-Promise.html">Promise</a></li><li><a href="external-Protocol.html">Protocol</a></li><li><a href="external-RangeChangeListener.html">RangeChangeListener</a></li><li><a href="external-Repetition.html">Repetition</a></li><li><a href="external-specialize.html">specialize</a></li></ul><h3>Classes</h3><ul><li><a href="DataMapping.html">DataMapping</a></li><li><a href="DataProvider.html">DataProvider</a></li><li><a href="DataSelector.html">DataSelector</a></li><li><a href="DataService.html">DataService</a></li><li><a href="DataStream.html">DataStream</a></li><li><a href="ObjectDescriptor.html">ObjectDescriptor</a></li><li><a href="PropertyDescriptor.html">PropertyDescriptor</a></li><li><a href="RelationshipDescriptor.html">RelationshipDescriptor</a></li><li><a href="RestService.html">RestService</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Thu Oct 01 2015 18:58:50 GMT-0500 (CDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
