Contour Project Style Guide
===
This project will generally follows the Montage Framework Style Guide. This is
still a [draft](https://gist.github.com/rayshan/1ac3fd6329c03124e483), so for
now the full project style is described below. Most of these recommendations
will be deleted in favor of the Montage Framework Style Guide's when that
document is completed, and then this document will only contain clarifications
about or differences relative to the Montage Framework Style Guide.

This style guide includes practices recommended for consistency. If any of the
recommendations conflicts with readability in a particular case, ignore the
recommendations and choose readability.

## Table of Contents

- [Code Format](#code-format)
- [Commits](#commit-message-format)
- [Naming Conventions](#naming-conventions)
- [Javascript](#javascript)
- [Docs](#docs)
- [Other](#other)


## General Code Format

The recommendations below should be settable through your editor. Use this
[EditorConfig File](http://example.com/todo) if your editor supports
[EditorConfig](http://EditorConfig.org).

- Character set: `UTF-8`
- Indent: 4 spaces (there should be no tabs in the codebase)
- Line ending: `LF` (Unix-style)
- Trim trailing whitespace
- Max line length: keep it reasonable

These recommendations are not configurable by EditorConfig:

- Function declaration:
    - Anonymous: `function () {}`, not `function() {}`
    - Named: `function foo() {}`, not `function foo () {}`
- Function invocation: `foo(arguments)`, not `foo (arguments)`
- No leading or trailing spaces: `(arguments)`, not `( arguments )`
- Space after `,` & `;` except at the end of lines:
    - `[1, 2, 3, 4, 5, 6]`
    - `for (i = 0; i < length; i++)`
- `1 + 1`, not `1+1`
- Space before & after comment blocks:
    - `// Comment`, not `//Comment`
    - `/* Comment */`, not `/*Comment*/`
- Serialization bracing in HTML template, as generated by [minit](https://github.com/montagejs/minit):

```html
<script type="text/montage-serialization">
{
    "owner": {
        "properties": {
            "element": {"#": "main"}
        }
    }
}
</script>
```


## Commits

- No more than one commit to master per feature: Squash commits before merging a branch into master
- Read and follow these recommendations about commit messages: http://chris.beams.io/posts/git-commit/
- Specifically, follow the 50/72: http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html, for example,:

```
1st line: Capitalized, no period, 50 characters max
(blank line)
72 3rd & following lines
```

- Use imperative verbs - "add", not "adds" / "added" / "adding"


## Naming Conventions

**General**

- Do not abbreviate unless if it's a well known term, for example, abbreviate `min`, `max`, `config`, don't abbreviate `EarthquakeOverlay` into `EQOverlay`

**JavaScript**

- Components & prototypes - must be upper CamelCase, for example, `ComponentFoo`; prototype name in serialization block auto converted to such case
- Boolean flags - prefix with `is` or `has`, for example, `isFoo`
- Private variable name - prefix with `_`, for example, `_foo`
- Constant variable name - `EMPTY_ARRAY`
- Prefer `self` over `that` or `me`, etc., for example, `var self = this;`
- Indent method chains, for example,:

```js
loadFile
    .then()
    .then()
    .catch()
```

**CSS**

- For components in Montage Framework & associated UI sets, always prefix with a namespace. For example, `.montage-ComponentFoo`, `.digit-ComponentFoo`.
- For apps using Montage Framework, we also recommend to optionally prefix with app name to distinguish source of components. For example, `.myApp-ComponentFoo`.

**Files & Directories**

- `component-foo.reel`

*TODO*: to be merged in: https://github.com/montagejs/montage/wiki/Naming-Conventions

**Order**

- Prefer alphabetical ordering, unless the natural order of a sequence would be immediately obvious to anyone reading the code. For `require`s, `switch` cases, etc.


## JavaScript

- Terminate statements with `;`
- Declare variables at top of block
- Declare multiple variables with single `var` statement & commas; can do in 1 line if not many variables
- Define constructor function at top of block
- Use K&R style braces, `{` at end of line, for example,:

```js
return {
   status: 'ok'
};
```

- No braces for 1-line `if` statements
- Prefer `===` and `!==` unless need `==` or `!=` behaviour
- `strict` mode - TBD
- Multiline string

```js
var longString = 'A rather long string of English text, an error message ' +
        'actually that just keeps going and going';
```

**Error handling**

TBD

**Performance**

- Async - prefer callback over promises in implementation, where performance matters; prefer promises in MontageJS APIs
- Prefer `for` or `do`-`while` loops over `forEach`
- Avoid closures

**QA**

- Hinting - TBD
- Testing - Jasmine + montage-testing


## Docs

- Write in [JSDoc](http://usejsdoc.org/) + markdown
- Prefer standard tags over synonyms, for example, `@function`, not `@func` or `@method`

**Comment style**

```js
/**
 * @private
 * @property {Object[]} value
 */

// not

/**
 @private
 @property {Object[]} value
 */
```

**Getter / setters**

If setting a private variable, document everything on getter / setter; if not, document on private variable.

```js

/**
 * Description
 *
 * @property {PressComposer} value
 * @default null
 * @private
 */
_pressComposer: {
    value: null
},

/**
 * @private
 */
_active: {
    value: false
},

/**
 * Description
 *
 * @property {boolean}
 * @default false
 */
active: {
    get: function () {
        return this._active;
    },
    set: function (value) {
        this._active = value;
        this.needsDraw = true;
    }
},
```


## Other

- No ``style="..."`` in HTML
- No nested components (``.reel`` inside a ``.reel``)
- No CSS beyond what is needed for Internet Explorer versions 10 and later, for
the latest versions of Chrome and Firefox (desktop as well as mobile), and
for the latest versions of Safari (desktop as well as mobile)
- One CSS selector per line:

```css
.foo,
.bar {
  ...
}
```

- One CSS media query per line, left aligned to the first query:

```css
@media (min-width: 300px),
       (min-height: 200px) {
    ...
}
```

- Vendor prefixed CSS properties are grouped before their corresponding
non-prefixed properties (see https://css-tricks.com/ordering-css3-properties/),
in order of longest to shortest prefixed property name (which is also typically
the reverse alphabetical order):
```css
.foo {
  -webkit-bar: 42px;
  -moz-bar: 42px;
  -ms-bar: 42px;
  bar: 42px;
}
```
