/**
 * @module "ui/menu.reel"
 * @requires montage/ui/component
 */
var Component = require("montage/ui/component").Component;

/**
 * @class Menu
 * @extends Component
 */
exports.Menu = Component.specialize(/** @lends Menu.prototype */{
    isVisible: {
        value: false
    },

    enterDocument: {
        value: function () {
            var self = this,
                templateObject;

            Object.keys(this.templateObjects).forEach(function (key) {
                templateObject = self.templateObjects[key];
                if (templateObject.prototype) {
                    templateObject.defineBinding("classList.has('contourApp-Menu-item--enabled')", {
                        "<-": "prototype == ownerComponent.panel.leftFirstContentPrototype"
                    })
                }
            })
        }
    },

    prepareForActivationEvents: {
        value: function () {
            this.addEventListener("action", this, false);
        }
    },

    handleAction: {
        value: function (event) {
            event.stopPropagation();

            this.panel["toggle" + event.target.position.toCapitalized()](event.target.prototype);
            this.isVisible = false;
            this.floatingButton.context = this.floatingButton.PANEL;
        }
    }
});
