/**
 * Created by Thomas on 4/14/15.
 */
/**
 * @module ui/control/time-elapsed.reel
 * @requires montage/ui/component
 */
var Component = require("montage/ui/component").Component,
    moment = require("moment-timezone");

/**
 * @class TimeElapsed
 * @extends Component
 */
var TimeElapsed = exports.TimeElapsed = Component.specialize(/** @lends TimeElapsed# */ {
    constructor: {
        value: function TimeElapsed() {

        }
    },
    enterDocument: {
      value: function(firstTime) {
          if (firstTime) {
              this.templateObjects.display.converter = {
                  convert: function (input) {
                      return input.fromNow();
                  }
              }
          }
      }
    },
    exitDocument: {
        value: function () {
            this.application.intervalController.remove(this);
        }
    },
    _date: {
        value: null
    },
    date: {
        get: function () {
            return this._date;
        },
        set: function (date) {
            var now = new moment();
            if (!date) {
                date = new moment();
            }
            this._interval = (date.isSame(now,'day')) < 1 ? 6000 : 60000;
            this._date = date;
        }
    },
    __interval: {
        value: null
    },
    _interval: {
        set: function (interval) {
            this.__interval = interval;
            this.application.intervalController.set(this,interval);
        },
        get: function() {
            return this.__interval;
        }
    }
});
