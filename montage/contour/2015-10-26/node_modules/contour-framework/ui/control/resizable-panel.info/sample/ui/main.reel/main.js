/**
 * @module ui/main.reel
 * @requires montage/ui/component
 */
var Component = require("montage/ui/component").Component,
    L = require("node_modules/leaflet/dist/leaflet.js");

/**
 * @class Main
 * @extends Component
 */
exports.Main = Component.specialize(/** @lends Main# */ {
    constructor: {
        value: function Main() {

        }
    },

    _map: {
        value: null
    },

    willDraw: {
        value: function () {
            if (this._map === null) {
                this._map = L.map(this.element.querySelector(".Main-map")).setView([9, 130], 6);
                L.tileLayer('http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/WMTS?service=WMTS&version=1.0.0&request=gettile&format=image/png&tileMatrix={z}&TileRow={y}&TileCol={x}&style=default&tileMatrixSet=default028mm', {
                    attribution: 'test',
                    maxZoom: 18
                }).addTo(this._map);
            }
        }
    },

    handleAction: {
        value:function(e){
            if (e.target.identifier === 'openButton1') {
                this.templateObjects.demoPanel.isLeftPanelShown = !this.templateObjects.demoPanel.isLeftPanelShown;
            } else if (e.target.identifier === 'openButton2') {
                this.templateObjects.demoPanel.isRightPanelShown = !this.templateObjects.demoPanel.isRightPanelShown;
            }else {
                if (this.templateObjects.substitution.switchValue == "tabBarAndArrow") {
                    this.templateObjects.substitution.switchValue = "arrowOnly";
                } else {
                    this.templateObjects.substitution.switchValue = "tabBarAndArrow";
                }
            }
        }
    }

});
