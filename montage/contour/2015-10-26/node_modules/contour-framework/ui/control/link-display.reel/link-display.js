/**
 * @module ui/control/link-display.reel
 */
var Component = require("montage/ui/component").Component;

/**
 * @class LinkDisplay
 * @extends Component
 */
exports.LinkDisplay = Component.specialize(/** @lends LinkDisplay# */ {
    constructor: {
        value: function LinkDisplay() {

        }
    },

    _preparedForAction: { value: false },

    enterDocument: {
        value: function (firstTime) {
            if (!firstTime) {
                this.prepareForActivationEvents();
            }
        }
    },

    exitDocument: {
        value: function () {
            if (this._preparedForAction) {
                this._preparedForAction = false;
                this.copyLink.removeEventListener("action", this, false);
            }
        }
    },

    handleAction: {
        value: function (e) {
            e.stopPropagation();
            if (document.selection) {
                var range = document.body.createTextRange();
                range.moveToElementText(this._linkTextElement);
                range.select();
            } else if (window.getSelection) {
                var range = document.createRange();
                range.selectNode(this._linkTextElement);
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(range);
            }
        }
    },

    prepareForActivationEvents: {
        value: function () {
            if (!this._preparedForAction) {
                this.copyLink.addEventListener("action", this, false);
            }
        }
    }


});
