<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="product-list-item.css">
    <script type="text/montage-serialization">
    {
        "owner": {
            "properties": {
                "element": {"#": "owner"},
                "_productDate": {"@": "productDate"}
            },
            "bindings": {
                 "classList.has('contour-ProductListItem--isFolder')": {"<-": "@owner.product.type.id == 'FOLDER_PRODUCT'"},
                 "classList.has('contour-ProductListItem--isNonImageFile')": {"<-": "@owner.product.type.id == 'FILE_PRODUCT' && !@owner._isImageFile()"},
                 "classList.has('contour-ProductListItem--isUrl')": {"<-": "@owner.product.type.id == 'URL_PRODUCT'"},
                 "classList.has('contour-ProductListItem--isText')": {"<-": "@owner.product.type.id == 'TEXT_PRODUCT'"}
            }
        },
        "productDate": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "productDate"}
            },
            "bindings": {
                "value": {"<-": "@owner.product.timelineDate"}
            }
        },
        "productName": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "productName"}
            },
            "bindings": {
                "classList.has('contour-ProductListItem-productName--extraMargin')": {"<-": "@owner.product.coordinates.defined() == false"},
                "value": {"<-": "@owner.product.name"}
            }
        },
        "productUser": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "productUser"}
            },
            "bindings": {
                "value": {"<-": "@owner.product.user"}
            }
        },
        "productLink": {
            "prototype": "ui/base/anchor.reel",
            "properties": {
                "element": {"#": "productLink"}
            },
            "bindings": {
                "href": {"<-": "@owner.product.displayLink"}
            }
        },
        "preview": {
            "prototype": "montage/ui/substitution.reel",
            "properties": {
                "element": {"#": "preview"}
            },
            "bindings": {
                "switchValue": {"<-": "@owner.product.type.id == 'FILE_PRODUCT' ? @owner._isImageFile() ? 'thumbnail' : 'extension' : ''"},
                "classList.has('contour-ProductListItem-hidden')": {"<-": "@owner.product.type.id == 'FILE_PRODUCT'"}
            }
        },
        "thumbnail": {
            "prototype": "ui/base/image.reel",
            "properties": {
                "element": {"#": "thumbnail"}
            },
            "bindings": {
                "src": {"<-": "'http://servicestest.pdc.org/hazards/api?m=hazards_products&action=showPreviewThumbnail&product=' + @owner.product.id + '&w=200&h=200&iar=1'"}
            }
        },
        "fileExtension": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "fileExtension"}
            },
            "bindings": {
                "value": {"<-": "@owner._fileExtension"}
            }
        },
        "location": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "location"}
            },
            "bindings": {
                "value": {"<-": "@owner.coordinateString"}
            }
        },
        "productLocationLabel": {
            "prototype": "montage/ui/component",
            "properties": {
                "element": {"#": "productLocationLabel"},
                "hasTemplate": false
            },
            "bindings": {
                "classList.has('contour-ProductListItem-locationLabel--visible')": {"<-": "@owner.product.coordinates.defined()"}
            }
        },
        "info": {
            "prototype": "montage/ui/component",
            "properties": {
                "element": {"#": "info"},
                "hasTemplate": false
            },
            "bindings": {
                "product": {"<-": "@owner.product"}
            }
        }
    }
    </script>
</head>
<body>
    <div data-montage-id="owner" class="contour-ProductListItem">
        <div class="contour-ProductListItem-contentWrapper">
            <a data-montage-id="productLink" target="_blank" class="contour-ProductListItem-productLink">
                <div data-montage-id="preview" class="contour-ProductListItem-preview">
                    <img data-montage-id="thumbnail" data-arg="image" class="contour-ProductListItem-thumbnail"/>
                    <span data-montage-id="fileExtension" data-arg="extension" class="contour-ProductListItem-fileExtension"></span>
                </div>
                <div data-montage-id="productName" class="contour-ProductListItem-productName"></div>
                <span class="contour-ProductListItem-byLabel">BY:</span>
                <span data-montage-id="productUser" class="contour-ProductListItem-productUser"></span>
                <span data-montage-id="productDate" class="contour-ProductListItem-productDate"></span>
            </a>
            <div data-montage-id="productLocationLabel" class="contour-ProductListItem-locationLabel">
                <span data-montage-id="location" class="contour-ProductListItem-location"></span>
            </div>
        </div>
        <div data-montage-id="info" class="contour-ProductListItem-info"></div>
    </div>
</body>
</html>
