<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="product-tree-item.css">
    <script type="text/montage-serialization">
    {
        "owner": {
            "properties": {
                "element": {"#": "owner"},
                "_productDate": {"@": "productDate"}
            },
            "bindings": {
                "_fileExtension": {"<-": "@owner.node.data.fileName.split('.').pop()"}
            }
        },
        "expandButtonContainer": {
            "prototype": "montage/ui/substitution.reel",
            "properties": {
                "element": {"#": "expandButtonContainer"}
            },
            "bindings": {
                "switchValue": {"<-": "@owner.node.data.children.defined() ? 'expand' : 'icon'"}
            }
        },
        "expandButton": {
            "prototype": "montage/ui/button.reel",
            "properties": {
                "element": {"#": "expandButton"}
            },
            "bindings": {
                "classList.has('contour-ProductTreeItem-expandButton--isExpanded')": {
                    "<-": "@owner.node.isExpanded"
                }
            }
        },
        "icon": {
            "prototype": "montage/ui/component",
            "properties": {
                "element": {"#": "icon"},
                "hasTemplate": false
            },
            "bindings": {
                "classList.has('contour-ProductTreeItem-icon--isNonImageFile')": {
                    "<-": "@owner.node.data.type.id == 'FILE_PRODUCT' && !['JPEG', 'JPG', 'PNG', 'GIF'].has(@owner._fileExtension)"
                },
                "classList.has('contour-ProductTreeItem-icon--isUrl')": {
                    "<-": "@owner.node.data.type.id == 'URL_PRODUCT'"
                },
                "classList.has('contour-ProductTreeItem-icon--isText')": {
                    "<-": "@owner.node.data.type.id == 'TEXT_PRODUCT'"
                }
            }
        },
        "fileExtensionCondition": {
            "prototype": "montage/ui/condition.reel",
            "properties": {
                "element": {"#": "fileExtensionCondition"},
                "removalStrategy": "hide"
            },
            "bindings": {
                "condition": {"<-": "!@owner.ownerComponent.isTreeMode"}
            }
        },
        "fileExtension": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "fileExtension"}
            },
            "bindings": {
                "value": {"<-": "@owner._fileExtension"}
            }
        },
        "productLink": {
            "prototype": "ui/base/anchor.reel",
            "properties": {
                "element": {"#": "productLink"}
            },
            "bindings": {
                "href": {"<-": "@owner.node.data.displayLink"}
            }
        },
        "labelSubstitution": {
            "prototype": "montage/ui/substitution.reel",
            "properties": {
                "element": {"#": "labelSubstitution"}
            },
            "bindings": {
                "switchValue": {"<-": "@owner.node.data.children.defined() ? 'folder' : 'link'"}
            }
        },
        "productNameLink": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "productNameLink"}
            },
            "bindings": {
                "value": {"<-": "@owner.node.data.name"}
            }
        },
        "productNameFolder": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "productNameFolder"}
            },
            "bindings": {
                "value": {"<-": "@owner.node.data.name"}
            }
        },
        "drillDownButton": {
            "prototype": "montage/ui/button.reel",
            "properties": {
                "element": {"#": "drillDownButton"}
            }
        },
        "drillDownButtonCondition": {
            "prototype": "montage/ui/condition.reel",
            "properties": {
                "element": {"#": "drillDownButtonCondition"},
                "removalStrategy": "hide"
            },
            "bindings": {
                "condition": {"<-": "!@owner.ownerComponent.isTreeMode && @owner.node.data.children.defined()"}
            }
        },
        "productDate": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "productDate"}
            },
            "bindings": {
                "value": {"<-": "@owner.node.data.timelineDate"}
            }
        },
        "productUser": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "productUser"}
            },
            "bindings": {
                "value": {"<-": "@owner.node.data.user"}
            }
        },
        "location": {
            "prototype": "montage/ui/button.reel",
            "properties": {
                "element": {"#": "location"}
            },
            "bindings": {
                "label": {"<-": "'11.19 S°, 136.09 E°'"}
            }
        },
        "locationCondition": {
            "prototype": "montage/ui/condition.reel",
            "properties": {
                "element": {"#": "locationCondition"},
                "removalStrategy": "hide"
            },
            "bindings": {
                "condition": {"<-": "true"}
            }
        },
        "detailsCondition": {
            "prototype": "montage/ui/condition.reel",
            "properties": {
                "element": {"#": "detailsCondition"},
                "removalStrategy": "hide"
            },
            "bindings": {
                "condition": {"<-": "!@owner.ownerComponent.isTreeMode"}
            }
        },
        "inspectButton": {
            "prototype": "montage/ui/button.reel",
            "properties": {
                "element": {"#": "inspectButton"}
            }
        }
    }
    </script>
</head>
<body>
    <div data-montage-id="owner" class="contour-ProductTreeItem">

        <div data-montage-id="expandButtonContainer"
             class="contour-ProductTreeItem-expandButtonContainer">

            <div data-arg="expand"
                 data-montage-id="expandButton"
                 class="contour-ProductTreeItem-expandButton"></div>

            <div data-arg="icon" class="contour-ProductTreeItem-iconWrapper">
                <div data-montage-id="icon" class="contour-ProductTreeItem-icon"></div>
                <div data-montage-id="fileExtensionCondition"
                     class="contour-ProductTreeItem-fileExtensionCondition">
                    <span data-montage-id="fileExtension" class="contour-ProductTreeItem-fileExtension"></span>
                </div>
            </div>

        </div>

        <div class="contour-ProductTreeItem-contentWrapper">

            <!-- Row 1 -->
            <div class="contour-ProductTreeItem-labelContainer">

                <div data-montage-id="labelSubstitution"
                     class="contour-ProductTreeItem-labelSubstitution">

                    <span data-arg="folder" data-montage-id="productNameFolder"
                          class="contour-ProductTreeItem-productName"></span>

                    <a data-arg="link"
                       data-montage-id="productLink"
                       target="_blank"
                       class="contour-ProductTreeItem-productLink">

                    <span data-montage-id="productNameLink"
                          class="contour-ProductTreeItem-productName"></span>
                    </a>
                </div>

                <div data-montage-id="drillDownButtonCondition"
                     class="contour-ProductTreeItem-drillDownButtonContainer">
                    <div data-montage-id="drillDownButton"
                         class="contour-ProductTreeItem-drillDownButton"></div>
                </div>

            </div>

            <!-- Row 2; shown when not isTreeMode -->
            <div data-montage-id="detailsCondition"
                 class="contour-ProductTreeItem-detailsCondition">
                <span class="contour-ProductTreeItem-byLabel">BY</span>
                <span data-montage-id="productUser"
                      class="contour-ProductTreeItem-productUser"></span>
                <span data-montage-id="productDate"
                      class="contour-ProductTreeItem-productDate"></span>
                <div data-montage-id="locationCondition"
                     class="contour-ProductTreeItem-locationCondition">
                    <span data-montage-id="location"
                          class="contour-ProductTreeItem-location"></span>
                </div>
            </div>

        </div>

        <div data-montage-id="inspectButton" class="contour-ProductTreeItem-inspectButton"></div>

    </div>
</body>
</html>
